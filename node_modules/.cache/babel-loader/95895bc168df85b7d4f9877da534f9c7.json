{"ast":null,"code":"var _jsxFileName = \"/home/diegofreitas/blog-frontend/src/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport api from './service/api';\nimport ReactLoading from 'react-loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PostPage = props => {\n  _s();\n\n  const [post, setPost] = useState(null);\n  useEffect(() => {\n    async function loadPost() {\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      let result = await api.get(`/api/v2/pages/${props.id}/`);\n      setPost(result.data);\n    }\n\n    if (!post) loadPost();\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main\",\n    children: post && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http://localhost:8000${post.post_image.url}`,\n        width: \"100%\",\n        height: \"550px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"text\",\n        dangerouslySetInnerHTML: {\n          __html: post.body\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }, this) || /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(ReactLoading, {\n        type: 'spokes',\n        color: '#000',\n        height: 200,\n        width: 100\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostPage, \"VAK5tdJEk0cqnRsmbvM4YDyoQLs=\");\n\n_c = PostPage;\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.loadData = async () => {\n      try {\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        let result = await api.get('/api/v2/pages/?type=posts.PostPage&fields=post_image&order=-id&limit=5');\n        let firstItem = result.data.items[0];\n        result.data.items.shift();\n        this.setState({\n          firstItem,\n          list: result.data.items,\n          postsLoaded: 5\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.loadMore = async () => {\n      this.setState({\n        loadingMore: true\n      });\n\n      try {\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        let result = await api.get(`/api/v2/pages/?type=posts.PostPage&fields=post_image&order=-id` + `&offset=${this.state.postsLoaded}&limit=5`);\n        this.setState({\n          list: this.state.list.concat(result.data.items),\n          postsLoaded: this.state.postsLoaded + result.data.items.length,\n          loadingMore: false\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.handlePostClick = id => {\n      this.setState({\n        openPostPage: id\n      });\n    };\n\n    this.handleNavClick = () => {\n      this.setState({\n        openPostPage: null,\n        list: null\n      });\n      this.loadData();\n    };\n\n    this.organizePostRows = list => {\n      var content = [];\n\n      for (let i = 0; i < list.length; i += 2) {\n        let row = {\n          leftItem: list[i]\n        };\n        if (list[i + 1]) row.rightItem = list[i + 1];\n        content.push(row);\n      }\n\n      return content;\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    var {\n      firstItem,\n      list,\n      openPostPage,\n      loadingMore\n    } = this.state;\n    console.log(openPostPage);\n    if (list) var postList = this.organizePostRows(list);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"top-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          onClick: this.handleNavClick,\n          children: \"RADIOHIPERATIVO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this), list && !openPostPage && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"head-image-container\",\n          onClick: () => this.handlePostClick(firstItem.id),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:8000${firstItem.post_image.url}`,\n            width: \"100%\",\n            height: \"550px\",\n            className: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: firstItem.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"post-list\",\n          children: postList.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-container-left\",\n              onClick: () => this.handlePostClick(item.leftItem.id),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:8000${item.leftItem.post_image.url}`,\n                width: \"100%\",\n                height: \"275px\",\n                className: \"image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.leftItem.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 21\n            }, this), item.rightItem && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-container-right\",\n              onClick: () => this.handlePostClick(item.rightItem.id),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:8000${item.rightItem.post_image.url}`,\n                width: \"100%\",\n                height: \"275px\",\n                className: \"image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.rightItem.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 23\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"load-more-button\",\n          onClick: this.loadMore,\n          children: !loadingMore && 'Carregar Mais' || /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"loading-container\",\n            children: /*#__PURE__*/_jsxDEV(ReactLoading, {\n              type: 'bubbles',\n              color: '#000',\n              height: 10,\n              width: 30\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, this), !list && !openPostPage && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"main\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"loading\",\n          children: /*#__PURE__*/_jsxDEV(ReactLoading, {\n            type: 'spokes',\n            color: '#000',\n            height: 200,\n            width: 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }, this), openPostPage && /*#__PURE__*/_jsxDEV(PostPage, {\n        id: openPostPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/_jsxDEV(Main, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 251,\n  columnNumber: 3\n}, this), document.getElementById('root'));\n\nvar _c;\n\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"sources":["/home/diegofreitas/blog-frontend/src/index.js"],"names":["React","useEffect","useState","ReactDOM","api","ReactLoading","PostPage","props","post","setPost","loadPost","Promise","resolve","setTimeout","result","get","id","data","post_image","url","title","__html","body","Main","Component","constructor","loadData","firstItem","items","shift","setState","list","postsLoaded","e","console","log","loadMore","loadingMore","state","concat","length","handlePostClick","openPostPage","handleNavClick","organizePostRows","content","i","row","leftItem","rightItem","push","componentDidMount","render","postList","map","item","index","document","getElementById"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport api from './service/api';\nimport ReactLoading from 'react-loading';\n\n\nconst PostPage = (props) => {\n  const [post, setPost] = useState(null);\n\n  useEffect(() => {\n    async function loadPost(){\n      await new Promise(resolve => setTimeout(resolve, 2000))\n      let result = await api.get(\n        `/api/v2/pages/${props.id}/`\n      )\n      setPost(result.data)\n    }\n\n    if(!post)\n      loadPost();\n  })\n\n  return(\n    <div id = 'main'>\n      {(post &&\n        <div id = 'post'>\n          <img\n            src = {`http://localhost:8000${post.post_image.url}`}\n            width = '100%'\n            height = '550px'\n          />\n          <h1>{post.title}</h1>\n\n          <div \n            id = 'text'\n            dangerouslySetInnerHTML={{\n              __html: post.body\n            }} \n          />\n        </div>\n      )||\n        <div \n          id = 'loading-container'\n        >\n          <ReactLoading type = {'spokes'} color = {'#000'} height={200} width={100}/>\n        </div>\n      }\n    </div>\n  )\n}\n\n\nclass Main extends React.Component{\n    constructor(props){\n      super(props);\n      this.state = {};\n    }\n\n    componentDidMount(){\n      this.loadData();\n    }\n\n    loadData = async () => {\n      try{\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        let result = await api.get(\n          '/api/v2/pages/?type=posts.PostPage&fields=post_image&order=-id&limit=5'\n        );\n\n        let firstItem = result.data.items[0];\n        result.data.items.shift();\n\n        this.setState({\n          firstItem,\n          list: result.data.items,\n          postsLoaded: 5\n        });\n      }catch(e){\n        console.log(e)\n      }\n    }\n\n    loadMore = async () => {\n\n      this.setState({\n        loadingMore: true\n      })\n\n      try{\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        let result = await api.get(\n          `/api/v2/pages/?type=posts.PostPage&fields=post_image&order=-id`+\n          `&offset=${this.state.postsLoaded}&limit=5`\n        );\n\n        this.setState({\n          list: this.state.list.concat(result.data.items),\n          postsLoaded: this.state.postsLoaded + result.data.items.length,\n          loadingMore: false\n        })\n\n      }catch(e){\n        console.log(e)\n      }\n    }\n\n    handlePostClick = (id) => {\n      this.setState({\n        openPostPage: id\n      })\n    }\n    \n    handleNavClick = () => {\n      this.setState({\n        openPostPage: null,\n        list: null\n      });\n\n      this.loadData();\n    }\n\n    organizePostRows = (list) => {\n      var content = []\n\n      for(let i = 0; i < list.length ; i+=2){\n\n        let row = {leftItem: list[i]};\n        if(list[i+1]) row.rightItem = list[i+1];\n        content.push(row);\n\n      }\n      return content;\n    }\n\n    render(){\n      var { firstItem, list, openPostPage, loadingMore } = this.state;\n\n      console.log(openPostPage)\n\n      if(list)\n        var postList = this.organizePostRows(list);\n        \n\n      return(\n        <div id = 'wrapper'>\n\n          <div id = 'top-bar'> \n            <h1 onClick = {this.handleNavClick}>RADIOHIPERATIVO</h1>\n          </div>\n\n          \n          {list && !openPostPage &&\n            <div id = 'main'> \n              <div \n                id = 'head-image-container'\n                onClick = {() => this.handlePostClick(firstItem.id)}\n              >\n                <img \n                  src = {`http://localhost:8000${firstItem.post_image.url}`}\n                  width = '100%'\n                  height =  '550px'\n                  className = 'image'\n                />\n\n                <p>\n                  {firstItem.title}\n                </p>\n\n              </div>\n\n              <div id='post-list'> \n                {postList.map((item, index) => (\n                  <div \n                    className = 'post-row'\n                    key = {index}\n                  >\n                    <div \n                      className = 'image-container-left'\n                      onClick = {() => this.handlePostClick(item.leftItem.id)}\n                    >\n                      <img\n                        src = {`http://localhost:8000${item.leftItem.post_image.url}`}\n                        width = '100%'\n                        height = '275px' \n                        className = 'image'\n                      />\n                      <p>{item.leftItem.title}</p>\n                    </div>\n                    {item.rightItem &&\n                      <div \n                        className = 'image-container-right'\n                        onClick = {() => this.handlePostClick(item.rightItem.id)}\n                      >\n                        <img\n                          src = {`http://localhost:8000${item.rightItem.post_image.url}`} \n                          width = '100%'\n                          height = '275px'\n                          className = 'image'\n                        />\n                        <p>{item.rightItem.title}</p>\n                      </div>\n                    }\n                  </div>\n                ))}\n              </div>\n\n              <div \n                id = 'load-more-button'\n                onClick = {this.loadMore}\n              > \n\n                {(!loadingMore && 'Carregar Mais') ||\n                  <div id = 'loading-container'>\n                    <ReactLoading \n                      type = {'bubbles'} \n                      color = {'#000'} \n                      height={10} \n                      width={30}\n                    />\n                  </div>\n                }\n                \n              </div>\n\n            </div>   \n           }\n\n           {!list && !openPostPage &&\n            <div id = 'main'>\n              <div \n                id = 'loading'\n              >\n                <ReactLoading \n                  type = {'spokes'} \n                  color = {'#000'} \n                  height={200} \n                  width={100}\n                />\n              </div>\n            </div>\n            }\n\n           {openPostPage && <PostPage id={openPostPage}/>}\n        </div>\n      )\n    }\n}\n\nReactDOM.render(\n  <Main />,\n  document.getElementById('root')\n);\n\n\n"]},"metadata":{},"sourceType":"module"}